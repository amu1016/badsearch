<%= render "shared/header" %>

<div class="club-show-wrap">
  <div class="club-show-content">
    <div class="club-show-top">
      <div class="club-show-date">
        <div class="club-show-new-date">
          募集開始日：<%= @club.created_at.to_s(:datetime_jp) %>
        </div>
        <div class="club-show-update">
          最終更新日：<%= @club.updated_at.to_s(:datetime_jp) %>
        </div>
      </div>
      <div class="club-show-content-title">
        <h1><%= @club.name%></h1>
      </div>
      <div class="club-show-content-status">
        <%= @club.status.name %>
      </div>
    </div>

    <div class="slider" id="slider-content">
      <% @club.images.each do |image| %>
        <div>
          <%= image_tag image, class: "club-show-image" %>
        </div>
      <% end %>
    </div>

    <div class="show-detail-label">
      サークル情報
    </div>

    <div class="club-show-detail">
      <table class="club-show-detail-table">
      <tbody>
        <tr>
          <th class="club-show-detail-item">創設時期</th>
          <td class="club-show-detail-value"><%= "#{@club.since_year}年#{@club.since_month}月" %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">活動地域</th>
          <td class="club-show-detail-value"><%= "#{@club.prefecture.name} #{@club.city}" %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">使用体育館</th>
          <td class="club-show-detail-value"><%= @club.gym %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">年齢構成</th>
          <td class="club-show-detail-value"><%= @club.age_range %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">男女比</th>
          <td class="club-show-detail-value"><%= @club.gender_ratio %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">初心者：経験者</th>
          <td class="club-show-detail-value"><%= @club.beginner_ratio %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">サークル目標</th>
          <td class="club-show-detail-value"><%= @club.purpose %></td>
        </tr>
         <tr>
          <th class="club-show-detail-item">サークルホームページ</th>
          <td class="club-show-detail-value">
            <% if @club.homepage.present? %>
            <%= @club.homepage %>
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>
    </div>

    <div class="club-show-information">
      <div class="club-show-information-label">
        サークル説明 〜アピールポイント・特徴〜
      </div>
      <div class="club-show-information-text">
      <%= @club.information%>
      </div>
    </div>

    <% if user_signed_in? && @club.user_id == current_user.id%>
    <div class="club-show-contact-wrap">
      <div class="club-show-contact">
        <%= link_to edit_club_path, class: "chat-contact-link" do %>
            <i class="far fa-edit"></i>
            <span>サークル情報の編集</span>
        <% end%>
        <%= link_to club_path, method: :delete, class: "mail-contact-link" do %>
            <i class="far fa-trash-alt"></i>
            <span>サークル募集の削除</span>
        <% end %>
        <div class="like-btn">
          <i class="fas fa-heart red"></i> 
          <span><%= "お気に入り #{@club.likes.count}"%></span>
        </div>
      </div>
    </div>
    <% elsif user_signed_in? %>
    <div class="club-show-contact-wrap">
      <div class="club-show-contact">
        <%= link_to new_room_path(user_id: current_user.id, club_id: params[:id]), class: "chat-contact-link" do%>
          <i class="far fa-comments"></i>
          <span>チャットで問い合わせる</span>
        <% end %>
        <%= link_to "#", class: "mail-contact-link" do%>
          <i class="far fa-envelope"></i>
          <span>メールで問い合わせる</span>
        <% end %>
        <div class="like-btn-fake">
          <span>お気に入り</span>
          <div id="like-button-<%= @club.id %>">
            <% if current_user&.like?(@club) %>
              <%= render partial: 'likes/unlike_button', locals: {club: @club}%>
            <% else %>
              <%= render partial: 'likes/like_button', locals: {club: @club}%>
            <% end%>
          </div>
        </div>
    <% else %>
    <div class="club-show-contact-wrap">
      <div class="club-show-contact">
        <%= link_to new_user_session_path, class: "chat-contact-link" do%>
          <i class="far fa-comments"></i>
          <span>チャットで問い合わせる</span>
        <% end %>
        <%= link_to new_user_session_path, class: "mail-contact-link" do%>
          <i class="far fa-envelope"></i>
          <span>メールで問い合わせる</span>
        <% end %>
        <div class="like-btn">
          <i class="fas fa-heart red"></i> 
          <span><%= "お気に入り #{@club.likes.count}"%></span>
        </div>
      </div>
    </div>
    <% end %>

    <div class="show-detail-label">
      活動予定日
    </div>

    <%= link_to "カレンダー", club_events_path(club_id: params[:id]) %>

  </div>
</div>